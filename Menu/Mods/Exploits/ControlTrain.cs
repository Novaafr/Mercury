using Colossal.Menu;
using Colossal.Patches;
using GorillaLocomotion.Gameplay;
using UnityEngine;

namespace Colossal.Mods
{
    public class ControlTrain : MonoBehaviour
    {
        public float controlSpeed = 0.25f; 

        public void Update()
        {
            if (!PluginConfig.ElfSpammer)
            {
                GameObject.Destroy(Plugin.holder.GetComponent<ControlTrain>());
                return;
            }

            NoncontrollableBroomstick theTrain = GameObject.Find("NCTrainEngine_Prefab").GetComponent<NoncontrollableBroomstick>();
            if (theTrain != null)
            {
                Vector2 joy = Controls.RightJoystickAxis();
                float i = joy.y;
                if (Mathf.Abs(i) > 0.05f)
                {
                    theTrain.duration += i * controlSpeed * Time.deltaTime;
                    if (theTrain.duration < 0f) theTrain.duration += 1f;
                    if (theTrain.duration > 1f) theTrain.duration -= 1f;
                }
            }
        }
    }
}
